#!/bin/sh

BRANCH_NAME=$(git symbolic-ref --short HEAD)

# feat:	Nova funcionalidade
# fix:	Corre√ß√£o de bug
# chore:	Mudan√ßas sem impacto no c√≥digo (build, config)
# docs:	Altera√ß√µes na documenta√ß√£o
# style:	Formata√ß√£o de c√≥digo (sem mudan√ßas l√≥gicas)
# refactor:	Melhorias no c√≥digo sem alterar funcionalidade
# test:	Adi√ß√£o/altera√ß√£o de testes


if ! echo "$BRANCH_NAME" | grep -Eq '^(feat|fix|chore|docs|style|refactor|test)/[a-z0-9._-]+$'; then
  echo "‚ùå Nome de branch inv√°lido: '$BRANCH_NAME'"
  echo "üîß Use o padr√£o: tipo/nome-da-tarefa"
  exit 1
fi

protected_branches="main master develop homolog"

for branch in $protected_branches; do
  if [ "$BRANCH_NAME" = "$branch" ]; then
    echo "‚ùå Commits diretos na branch '$branch' n√£o s√£o permitidos."
    exit 1
  fi
done

